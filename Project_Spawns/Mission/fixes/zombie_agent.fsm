/*%FSM<COMPILE "C:\Program Files (x86)\Bohemia Interactive\Tools\FSM Editor Personal Edition\scriptedFSM.cfg, DayZ Zombie Agent">*/
/*%FSM<HEAD>*/
/*
item0[] = {"init",0,250,-75.000000,-250.000000,25.000000,-200.000000,0.000000,"init"};
item1[] = {"End",1,250,175.000000,-250.000000,275.000000,-200.000000,0.000000,"End"};
item2[] = {"wait",4,218,-75.000000,0.000000,25.000000,50.000000,0.000000,"wait"};
item3[] = {"Looking_for_Targ",2,250,-75.000000,75.000000,25.000000,125.000000,0.000000,"Looking for" \n "Target"};
item4[] = {"Not_Alive",4,218,50.000000,300.000000,150.000000,350.000000,5.000000,"Not" \n "Alive"};
item5[] = {"Nobody_Near",4,218,25.000000,375.000000,125.000000,425.000000,4.000000,"Nobody" \n "Near"};
item6[] = {"loiter",4,218,-325.000000,-50.000000,-225.000000,0.000000,0.000000,"loiter"};
item7[] = {"Loiter",2,250,-325.000000,75.000000,-225.000000,125.000000,0.000000,"Loiter"};
item8[] = {"In_Position",4,218,-475.000000,75.000000,-375.000000,125.000000,1.000000,"In Position"};
item9[] = {"",7,210,-29.000042,321.000000,-20.999958,329.000000,0.000000,""};
item10[] = {"",7,210,-29.000042,395.999939,-20.999958,404.000061,0.000000,""};
item11[] = {"true",8,218,-75.000000,-175.000000,25.000000,-125.000000,0.000000,"true"};
item12[] = {"Begin",2,250,-75.000000,-100.000000,25.000000,-50.000000,0.000000,"Begin"};
item13[] = {"",7,210,-29.000006,-29.000004,-20.999996,-20.999996,0.000000,""};
item14[] = {"",7,210,-254.000046,146.000000,-245.999954,154.000000,0.000000,""};
item15[] = {"Has_Target",4,218,-150.000000,175.000000,-50.000000,225.000000,1.000000,"Has" \n "Target"};
item16[] = {"Chase",2,4346,-150.000000,300.000000,-50.000000,350.000000,0.000000,"Chase"};
item17[] = {"Time_Check",4,218,-175.000000,0.000000,-75.000000,50.000000,0.000000,"Time" \n "Check"};
item18[] = {"",7,210,-29.000006,146.000000,-20.999996,154.000000,0.000000,""};
item19[] = {"",7,210,-29.000006,196.000000,-20.999996,204.000000,0.000000,""};
item20[] = {"Time_Check",4,218,-425.000000,0.000000,-325.000000,50.000000,0.000000,"Time" \n "Check"};
item21[] = {"Main_Loop",4,218,-225.000000,225.000000,-125.000000,275.000000,0.000000,"Main" \n "Loop"};
item22[] = {"No_Target",4,218,-275.000000,375.000000,-175.000000,425.000000,3.000000,"No" \n "Target"};
item23[] = {"",7,210,-479.000000,396.000000,-471.000000,404.000000,0.000000,""};
item24[] = {"",7,210,-479.000000,146.000000,-471.000000,154.000000,0.000000,""};
item25[] = {"Cleanup_",2,250,50.000000,175.000000,150.000000,225.000000,0.000000,"Cleanup?"};
item26[] = {"nobody_around",4,218,175.000000,-25.000000,275.000000,25.000000,0.000000,"nobody" \n "around"};
item27[] = {"",7,210,-104.000023,396.000000,-95.999992,404.000000,0.000000,""};
item28[] = {"cant_see",4,218,-275.000000,450.000000,-175.000000,500.000000,2.000000,"cant" \n "see"};
item29[] = {"Finish_Move",2,250,-275.000000,525.000000,-175.000000,575.000000,0.000000,"Finish" \n "Move"};
item30[] = {"finished",4,218,-425.000000,525.000000,-325.000000,575.000000,1.000000,"finished"};
item31[] = {"",7,210,-479.000000,546.000000,-471.000000,554.000000,0.000000,""};
item32[] = {"",7,210,-29.000002,546.000000,-20.999998,554.000000,0.000000,""};
item33[] = {"",7,210,-304.000000,146.000000,-296.000000,154.000000,0.000000,""};
item34[] = {"wait",2,250,300.000000,175.000000,400.000000,225.000000,0.000000,"wait"};
item35[] = {"time_up",4,218,300.000000,-25.000000,400.000000,25.000000,0.000000,"time" \n "up"};
item36[] = {"",7,210,346.000000,95.999992,354.000000,104.000000,0.000000,""};
item37[] = {"",7,210,221.000000,96.000008,229.000000,103.999977,0.000000,""};
item38[] = {"Time_Check",4,218,425.000000,125.000000,525.000000,175.000000,0.000000,"Time" \n "Check"};
item39[] = {"",7,210,346.000000,-79.000000,354.000000,-71.000000,0.000000,""};
item40[] = {"",7,210,221.000000,-79.000000,229.000000,-71.000000,0.000000,""};
item41[] = {"too_long",4,218,-275.000000,600.000000,-175.000000,650.000000,0.000000,"too long"};
item42[] = {"",7,210,-479.000000,621.000000,-471.000000,629.000000,0.000000,""};
item43[] = {"Reset_Targeting",2,250,-525.000000,300.000000,-425.000000,350.000000,0.000000,"Reset" \n "Targeting"};
item44[] = {"true",8,218,-525.000000,200.000000,-425.000000,250.000000,0.000000,"true"};
item45[] = {"deleted",4,218,425.000000,-25.000000,525.000000,25.000000,0.000000,"deleted"};
item46[] = {"",7,210,471.000000,-79.000000,479.000000,-71.000000,0.000000,""};
item47[] = {"",7,210,471.000000,95.999977,479.000000,104.000023,0.000000,""};
item48[] = {"",7,210,-104.000000,471.000000,-95.999992,479.000000,0.000000,""};
item49[] = {"is_Dedicated",4,218,50.000000,-250.000000,150.000000,-200.000000,5.000000,"is" \n "Dedicated"};
item50[] = {"Delay",4,218,175.000000,175.000000,275.000000,225.000000,0.000000,"Delay"};
item51[] = {"cache_loop",2,250,625.000000,375.000000,725.000000,425.000000,0.000000,"cache" \n "loop"};
item52[] = {"",7,210,-554.000000,671.000000,-546.000000,679.000000,0.000000,""};
item53[] = {"Can_Wake",4,218,625.000000,525.000000,725.000000,575.000000,0.000000,"Can" \n "Wake"};
item54[] = {"",7,210,-553.999939,146.000031,-546.000000,153.999985,0.000000,""};
item55[] = {"Time_Check",4,218,750.000000,375.000000,850.000000,425.000000,0.000000,"Time" \n "Check"};
item56[] = {"Wake_Up",2,250,625.000000,650.000000,725.000000,700.000000,0.000000,"Wake" \n "Up"};
item57[] = {"true",8,218,225.000000,650.000000,325.000000,700.000000,0.000000,"true"};
item58[] = {"cache_or_delete",2,250,300.000000,375.000000,400.000000,425.000000,0.000000,"cache" \n "or" \n "delete"};
item59[] = {"can_cache",4,218,450.000000,375.000000,550.000000,425.000000,0.000000,"can" \n "cache"};
item60[] = {"",7,210,45.999958,670.999939,54.000042,679.000061,0.000000,""};
item61[] = {"nullLoc_timeout",4,218,625.000000,175.000000,725.000000,225.000000,5.000000,"nullLoc" \n "timeout"};
item62[] = {"maxzeds_cached",4,218,50.000000,-100.000000,150.000000,-50.000000,1.000000,"maxzeds" \n "cached"};
item63[] = {"can_t_cache",4,218,300.000000,275.000000,400.000000,325.000000,0.000000,"can't" \n "cache"};
item64[] = {"TP_Wake",4,218,775.000000,525.000000,875.000000,575.000000,0.000000,"TP" \n "Wake"};
link0[] = {0,11};
link1[] = {0,49};
link2[] = {2,3};
link3[] = {3,17};
link4[] = {3,18};
link5[] = {4,25};
link6[] = {5,58};
link7[] = {6,7};
link8[] = {7,8};
link9[] = {7,14};
link10[] = {7,20};
link11[] = {8,7};
link12[] = {9,4};
link13[] = {9,10};
link14[] = {10,5};
link15[] = {11,12};
link16[] = {12,13};
link17[] = {12,62};
link18[] = {13,2};
link19[] = {13,6};
link20[] = {14,18};
link21[] = {15,16};
link22[] = {16,9};
link23[] = {16,21};
link24[] = {16,27};
link25[] = {17,3};
link26[] = {18,19};
link27[] = {19,9};
link28[] = {19,15};
link29[] = {20,7};
link30[] = {21,16};
link31[] = {22,23};
link32[] = {23,43};
link33[] = {24,33};
link34[] = {25,50};
link35[] = {26,40};
link36[] = {27,22};
link37[] = {27,48};
link38[] = {28,29};
link39[] = {29,30};
link40[] = {29,32};
link41[] = {29,41};
link42[] = {30,31};
link43[] = {31,23};
link44[] = {32,10};
link45[] = {33,7};
link46[] = {34,36};
link47[] = {34,38};
link48[] = {35,39};
link49[] = {36,35};
link50[] = {36,37};
link51[] = {36,47};
link52[] = {37,26};
link53[] = {38,34};
link54[] = {39,40};
link55[] = {40,1};
link56[] = {41,42};
link57[] = {42,31};
link58[] = {43,44};
link59[] = {44,24};
link60[] = {45,46};
link61[] = {46,39};
link62[] = {47,45};
link63[] = {48,28};
link64[] = {49,1};
link65[] = {50,34};
link66[] = {51,53};
link67[] = {51,55};
link68[] = {51,61};
link69[] = {51,64};
link70[] = {52,54};
link71[] = {53,56};
link72[] = {54,24};
link73[] = {55,51};
link74[] = {56,57};
link75[] = {57,60};
link76[] = {58,59};
link77[] = {58,63};
link78[] = {59,51};
link79[] = {60,52};
link80[] = {61,34};
link81[] = {62,25};
link82[] = {63,34};
link83[] = {64,56};
globals[] = {25.000000,1,0,0,0,640,480,1,153,6316128,1,-787.637817,426.503357,796.839600,-85.202515,1254,911,1};
window[] = {2,-1,-1,-1,-1,1071,75,1545,75,3,1272};
*//*%FSM</HEAD>*/
class FSM
{
  fsmName = "DayZ Zombie Agent";
  class States
  {
    /*%FSM<STATE "init">*/
    class init
    {
      name = "init";
      init = /*%FSM<STATEINIT""">*/"_position = 	_this select 0;" \n
       "_agent = 		_this select 1;" \n
       "" \n
       "_tempZedNum = 0;" \n
       "" \n
       "_agent disableAI ""TARGET"";" \n
       "_agent disableAI ""AUTOTARGET"";" \n
       "" \n
       "_agent setVariable [""asleep"",false,true];" \n
       "" \n
       "_walkSpeed = (random 3) max 1;" \n
       "_runSpeed = (random 4) max 3;" \n
       "" \n
       "_secondHand = false;" \n
       "" \n
       "if (count _this > 2) then {" \n
       "	_secondHand = true;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "is_Dedicated">*/
        class is_Dedicated
        {
          priority = 5.000000;
          to="End";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"isDedicated"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "true">*/
        class true
        {
          priority = 0.000000;
          to="Begin";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"dayz_clientPreload and !(isNull _agent)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "End">*/
    class End
    {
      name = "End";
      init = /*%FSM<STATEINIT""">*/"if (!isDedicated) then {" \n
       "	if (alive _agent) then {" \n
       "" \n
       "			_city = yum_playerLastCity;" \n
       "			_zedCount = _city getVariable [""numZombies"", 0];" \n
       "			" \n
       "			if (_zedCount > 0) then {" \n
       "				//_radius = _city getVariable [""spawnRadius"", 200];" \n
       "				" \n
       "				if (count client_despawnLocs > 0) then {" \n
       "					_foundLocation = false;" \n
       "					_counter = 0;" \n
       "" \n
       "					{" \n
       "						if ((_x select 0) == _city) exitWith {" \n
       "							_tempZeds = _x select 1;" \n
       "							client_despawnLocs set [_counter, [_city, _tempZeds + 1]];" \n
       "							_foundLocation = true;" \n
       "						};" \n
       "						_counter = _counter + 1;" \n
       "					} forEach client_despawnLocs;" \n
       "" \n
       "					if (!_foundLocation) then {" \n
       "						client_despawnLocs set [(count client_despawnLocs), [_city,1]];" \n
       "					};" \n
       "				} else {" \n
       "					client_despawnLocs set [0, [_city,1]];" \n
       "				};" \n
       "			};" \n
       "" \n
       "	};" \n
       "	dayz_spawnZombies = dayz_spawnZombies - 1;" \n
       "	" \n
       "	if (!isNull _agent) then {" \n
       "		deleteVehicle _agent;" \n
       "	};" \n
       "" \n
       "} else {" \n
       "	[_agent] call zombie_findOwner;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Looking_for_Targ">*/
    class Looking_for_Targ
    {
      name = "Looking_for_Targ";
      init = /*%FSM<STATEINIT""">*/"_isAlive = alive _agent;" \n
       "_target = _agent call zombie_findTargetAgent;" \n
       "if (time - _entityTime > 20) then {" \n
       "	_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 300)} count playableUnits) > 0;" \n
       "	_entityTime = time;" \n
       "};" \n
       "" \n
       "_timeN = time;" \n
       "" \n
       "_newDest = _agent getVariable [""myDest"",getposATL _agent];" \n
       "if (!isNil ""_newDest"") then {" \n
       "	if (_newDest distance _myDest > 0) then {" \n
       "		_myDest = _newDest;" \n
       "		_agent moveTo _myDest;" \n
       "		_agent forceSpeed _walkSpeed;" \n
       "	};" \n
       "};" \n
       "" \n
       "//diag_log (""Zombie "" + str(_agent) + "" Wait "");"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "Not_Alive">*/
        class Not_Alive
        {
          priority = 5.000000;
          to="Cleanup_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isAlive"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Nobody_Near">*/
        class Nobody_Near
        {
          priority = 4.000000;
          to="cache_or_delete";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Has_Target">*/
        class Has_Target
        {
          priority = 1.000000;
          to="Chase";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!(isNull _target)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"//Leader cries out" \n
           "if (_isSomeone) then {" \n
           "	if (isPlayer _target) then {" \n
           "		if (random 1 < 0.4) then {" \n
           "			[_agent,""spotted"",0,false] call dayz_zombieSpeak;" \n
           "		};" \n
           "	} else {" \n
           "		if (random 1 < 0.05) then {" \n
           "			[_agent,""spotted"",0,true] call dayz_zombieSpeak;" \n
           "		};" \n
           "	};" \n
           "};" \n
           "if (!_hasMoved) then {" \n
           "	_agent setVariable[""doLoiter"",true,true];" \n
           "};" \n
           "_countr = 0;" \n
           "_losCheck = 0;" \n
           "_cantSee = false;" \n
           "_entityTime = time;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Time_Check">*/
        class Time_Check
        {
          priority = 0.000000;
          to="Looking_for_Targ";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _timeN) > 1"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Loiter">*/
    class Loiter
    {
      name = "Loiter";
      init = /*%FSM<STATEINIT""">*/"_isAlive = alive _agent;" \n
       "_target = _agent call zombie_findTargetAgent;" \n
       "if (time - _entityTime > 20) then {" \n
       "	_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 300)} count playableUnits) > 0;" \n
       "	_entityTime = time;" \n
       "};" \n
       "" \n
       "_newDest = _agent getVariable [""myDest"",getposATL _agent];" \n
       "" \n
       "if (!isNil ""_newDest"") then {" \n
       "	if (_newDest distance _myDest > 0) then {" \n
       "		_myDest = _newDest;" \n
       "		_agent moveTo _myDest;" \n
       "	};" \n
       "};" \n
       "" \n
       "_agent forceSpeed _walkSpeed;" \n
       "_timeN = time;" \n
       "" \n
       "if (_secondHand) then {" \n
       "	//diag_log (""Zombie "" + str(_agent) + "" Loiter "" + "" distance: "" + str(_newDest distance _myDest));" \n
       "	//_agent doMove (getPosATL player);" \n
       "	_agent moveTo (getPosATL player);" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "Not_Alive">*/
        class Not_Alive
        {
          priority = 5.000000;
          to="Cleanup_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isAlive"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Nobody_Near">*/
        class Nobody_Near
        {
          priority = 4.000000;
          to="cache_or_delete";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Has_Target">*/
        class Has_Target
        {
          priority = 1.000000;
          to="Chase";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!(isNull _target)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"//Leader cries out" \n
           "if (_isSomeone) then {" \n
           "	if (isPlayer _target) then {" \n
           "		if (random 1 < 0.4) then {" \n
           "			[_agent,""spotted"",0,false] call dayz_zombieSpeak;" \n
           "		};" \n
           "	} else {" \n
           "		if (random 1 < 0.05) then {" \n
           "			[_agent,""spotted"",0,true] call dayz_zombieSpeak;" \n
           "		};" \n
           "	};" \n
           "};" \n
           "if (!_hasMoved) then {" \n
           "	_agent setVariable[""doLoiter"",true,true];" \n
           "};" \n
           "_countr = 0;" \n
           "_losCheck = 0;" \n
           "_cantSee = false;" \n
           "_entityTime = time;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "In_Position">*/
        class In_Position
        {
          priority = 1.000000;
          to="Loiter";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_agent distance (_agent getVariable [""myDest"",getposATL _agent]) < 3"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"[_agent,_position] call zombie_loiter;" \n
           "_myDest = _agent getVariable [""myDest"",getposATL _agent];" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Time_Check">*/
        class Time_Check
        {
          priority = 0.000000;
          to="Loiter";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _timeN) > 1"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Begin">*/
    class Begin
    {
      name = "Begin";
      init = /*%FSM<STATEINIT""">*/"_doLoiter = 	true;" \n
       "" \n
       "_myDest = 	_position;" \n
       "_newDest = 	_position;" \n
       "_array = 		[];" \n
       "" \n
       "_bodyStay = 	60;" \n
       "" \n
       "_hasMoved = _doLoiter;" \n
       "" \n
       "_agent disableAI ""FSM"";" \n
       "_agent setBehaviour ""CARELESS"";" \n
       "_agent setCombatMode ""RED"";" \n
       "_agent setSkill 0;" \n
       "" \n
       "_newDest = getPosATL _agent;" \n
       "_timeN = time;" \n
       "" \n
       " _id = _agent addeventhandler [""HandleDamage"",{_this call local_zombieDamage}];" \n
       "" \n
       "//hint ""run local zombie"";" \n
       "_isSomeone = true;" \n
       "" \n
       "_target = objNull;" \n
       "_targetPos = [];" \n
       "_countr = 0;" \n
       "" \n
       "//Spawn roaming script (individual to unit)" \n
       "_entityTime = time;" \n
       "" \n
       "if (_secondHand) then {" \n
       "	//diag_log (""Zombie Brain Initialized "" + str(_agent) + "" doLoiter: "" + str(_doLoiter));" \n
       "	[_agent,_position] call zombie_loiter;" \n
       "	_myDest = _agent getVariable [""myDest"",getposATL _agent];" \n
       "};" \n
       "" \n
       "dayz_spawnZombies = dayz_spawnZombies + 1;" \n
       "" \n
       "_playerNullLoc = 0;" \n
       "_city = ""noloc"";" \n
       "_zedCount = -100;" \n
       "_mX = 7;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "maxzeds_cached">*/
        class maxzeds_cached
        {
          priority = 1.000000;
          to="Cleanup_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((dayz_spawnZombies - sleepingZeds) < dayz_maxLocalZombies) and (sleepingZeds > 100)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "loiter">*/
        class loiter
        {
          priority = 0.000000;
          to="Loiter";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_hasMoved"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_agent switchMove """";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "wait">*/
        class wait
        {
          priority = 0.000000;
          to="Looking_for_Targ";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_hasMoved"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_agent switchMove """";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Chase">*/
    class Chase
    {
      name = "Chase";
      init = /*%FSM<STATEINIT""">*/"_timeN = time;" \n
       "_isAlive = alive _agent;" \n
       "if (time - _entityTime > 20) then {" \n
       "	_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 300)} count playableUnits) > 0;" \n
       "	_entityTime = time;" \n
       "};" \n
       "" \n
       "if (speed _agent < 0.1) then {_countr = _countr + 1} else {_countr = 0};" \n
       "_posB = getPosATL _target;" \n
       "_posA = getPosATL _agent;" \n
       "_targetPos = [_posA,_posB,_mX] call yum_findMidPos;" \n
       "" \n
       "if (isPlayer _target) then {" \n
       "	if (_losCheck >= 30) then {" \n
       "		_losCheck = 0;" \n
       "		if ((_agent distance _target) > 200) then {" \n
       "			_cantSee = terrainIntersectASL [(eyePos _target), (eyePos _target)];" \n
       "		};" \n
       "	};" \n
       "} else {" \n
       "	if (_agent distance _target < 3) then {" \n
       "		_cantSee = true;" \n
       "	};" \n
       "};" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "Not_Alive">*/
        class Not_Alive
        {
          priority = 5.000000;
          to="Cleanup_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isAlive"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Nobody_Near">*/
        class Nobody_Near
        {
          priority = 4.000000;
          to="cache_or_delete";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "No_Target">*/
        class No_Target
        {
          priority = 3.000000;
          to="Reset_Targeting";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(isNull _target)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "cant_see">*/
        class cant_see
        {
          priority = 2.000000;
          to="Finish_Move";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_cantSee"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Main_Loop">*/
        class Main_Loop
        {
          priority = 0.000000;
          to="Chase";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"moveToCompleted _agent or (time - _timeN) > 15"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_losCheck = _losCheck + 1;" \n
           "" \n
           "_posB = getPosATL _target;" \n
           "_posA = getPosATL _agent;" \n
           "_targetPos = [_posA,_posB,_mX] call yum_findMidPos;" \n
           "_agent moveTo _targetPos;" \n
           "_agent forceSpeed _runSpeed;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Cleanup_">*/
    class Cleanup_
    {
      name = "Cleanup_";
      init = /*%FSM<STATEINIT""">*/"_waitStart = time;" \n
       "_waitCheckVar = 20 + (random 10);"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "Delay">*/
        class Delay
        {
          priority = 0.000000;
          to="wait";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _waitStart) > _waitCheckVar"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Finish_Move">*/
    class Finish_Move
    {
      name = "Finish_Move";
      init = /*%FSM<STATEINIT""">*/"_timeN = time;" \n
       "_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 200)} count playableUnits) > 0;" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "Nobody_Near">*/
        class Nobody_Near
        {
          priority = 4.000000;
          to="cache_or_delete";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "finished">*/
        class finished
        {
          priority = 1.000000;
          to="Reset_Targeting";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((_agent distance _targetPos < 1) or (isNil ""_targetPos""))"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "too_long">*/
        class too_long
        {
          priority = 0.000000;
          to="Reset_Targeting";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _timeN) > 10"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "wait">*/
    class wait
    {
      name = "wait";
      init = /*%FSM<STATEINIT""">*/"_timeN = time;" \n
       "_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 200)} count playableUnits) > 0;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "time_up">*/
        class time_up
        {
          priority = 0.000000;
          to="End";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _waitStart) > 300"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "nobody_around">*/
        class nobody_around
        {
          priority = 0.000000;
          to="End";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "deleted">*/
        class deleted
        {
          priority = 0.000000;
          to="End";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"isNull _agent;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Time_Check">*/
        class Time_Check
        {
          priority = 0.000000;
          to="wait";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _timeN) > (25 + (random 5))"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Reset_Targeting">*/
    class Reset_Targeting
    {
      name = "Reset_Targeting";
      init = /*%FSM<STATEINIT""">*/"/*" \n
       "if (!isNull _target) then {" \n
       "	_targetPos = getPosATL _target;" \n
       "	_agent setVariable [""myDest"",_targetPos];" \n
       "	_agent moveTo _targetPos;" \n
       "};" \n
       "*/" \n
       "" \n
       "_agent setVariable [""targets"",[],true];" \n
       "_target = objNull;" \n
       "" \n
       "[_agent,_position] call zombie_loiter;" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "true">*/
        class true
        {
          priority = 0.000000;
          to="Loiter";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "cache_loop">*/
    class cache_loop
    {
      name = "cache_loop";
      init = /*%FSM<STATEINIT""">*/"_timeCheck = time;" \n
       "_isSomeone = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 300) and (_agent distance _x > 30)} count playableUnits) > 0;" \n
       "if (yum_playerCurrentLoc == ""nolocation"") then {" \n
       "_playerNullLoc = _playerNullLoc + 1;" \n
       "} else {" \n
       "_playerNullLoc = 0;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "nullLoc_timeout">*/
        class nullLoc_timeout
        {
          priority = 5.000000;
          to="wait";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_playerNullLoc > 5"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"sleepingZeds = sleepingZeds - 1;" \n
           "_waitStart = time;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Time_Check">*/
        class Time_Check
        {
          priority = 0.000000;
          to="cache_loop";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _timeCheck) > 20"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"/*" \n
           "if (!_isSomeone) then {" \n
           "_dontTP = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 600) and (_agent distance _x > 30)} count playableUnits) > 0;" \n
           "if (!_dontTP) then {" \n
           "_agent execVM ""fixes\zombie_MoveCloser.sqf"";" \n
           "};" \n
           "};" \n
           "*/"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "TP_Wake">*/
        class TP_Wake
        {
          priority = 0.000000;
          to="Wake_Up";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((time - _sleepStart) > 20) and ((dayz_spawnZombies - sleepingZeds) < dayz_maxLocalZombies) and !_isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_agent execVM ""fixes\zombie_MoveCloser.sqf"";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "Can_Wake">*/
        class Can_Wake
        {
          priority = 0.000000;
          to="Wake_Up";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((time - _sleepStart) > 20) and ((dayz_spawnZombies - sleepingZeds) < dayz_maxLocalZombies) and _isSomeone"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "Wake_Up">*/
    class Wake_Up
    {
      name = "Wake_Up";
      init = /*%FSM<STATEINIT""">*/"sleepingZeds = sleepingZeds - 1;" \n
       "" \n
       "_agent enableAI ""MOVE"";" \n
       "_agent enableAI ""ANIM"";" \n
       "" \n
       "_agent enableSimulation true;" \n
       "//_agent setPosATL [(getPosAtL _agent) select 0, (getPosAtL _agent) select 1,0];" \n
       "//_dontTP = ({(isPlayer _x) and (alive _x) and (_agent distance _x < 400) and (_agent distance _x > 5)} count playableUnits) > 0;" \n
       "//if (!_dontTP) then {" \n
       "//	_agent execVM ""fixes\zombie_MoveCloser.sqf"";" \n
       "//};" \n
       "//cutText [format [(""Zed leaving sleep state... NumSleeping = %1""), sleepingZeds], ""PLAIN DOWN""];" \n
       "" \n
       "_agent switchMove """";"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "true">*/
        class true
        {
          priority = 0.000000;
          to="Loiter";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "cache_or_delete">*/
    class cache_or_delete
    {
      name = "cache_or_delete";
      init = /*%FSM<STATEINIT""">*/"_sleepStart = time;" \n
       "" \n
       "sleepingZeds = sleepingZeds + 1;" \n
       "//cutText [format [(""Zed entering sleep state... NumSleeping = %1""), sleepingZeds], ""PLAIN DOWN""];" \n
       "" \n
       "_agent disableAI ""ANIM"";" \n
       "_agent disableAI ""MOVE"";" \n
       "" \n
       "_agent switchMove ""AmovPpneMstpSnonWnonDnon_healed"";" \n
       "" \n
       "_agent enableSimulation false;" \n
       "" \n
       "_agent setPosATL [(getPosAtL _agent) select 0, (getPosAtL _agent) select 1,((getPosAtL _agent) select 2) - 20];" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "can_t_cache">*/
        class can_t_cache
        {
          priority = 0.000000;
          to="wait";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"sleepingZeds > 100"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"sleepingZeds = sleepingZeds - 1;" \n
           "_waitStart = time;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "can_cache">*/
        class can_cache
        {
          priority = 0.000000;
          to="cache_loop";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"sleepingZeds < 100"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
  };
  initState="init";
  finalStates[] =
  {
    "End",
  };
};
/*%FSM</COMPILE>*/